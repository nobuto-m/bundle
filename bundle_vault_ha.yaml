series: focal
applications:
  easyrsa:
    charm: cs:~containers/easyrsa
    channel: stable
    revision: 420
    resources:
      easyrsa: 5
    num_units: 1
    to:
    - lxd:0
  etcd:
    charm: etcd
    channel: stable
    revision: 634
    resources:
      core: 0
      etcd: 3
      snapshot: 0
    num_units: 3
    to:
    - lxd:0
    - lxd:1
    - lxd:2
  mysql-innodb-cluster:
    charm: mysql-innodb-cluster
    channel: stable
    revision: 15
    resources:
      mysql-shell: 0
    num_units: 3
    to:
    - lxd:0
    - lxd:1
    - lxd:2
  vault:
    charm: vault
    channel: stable
    revision: 54
    resources:
      core: 0
      vault: 0
    num_units: 3
    to:
    - lxd:0
    - lxd:1
    - lxd:2
    options:
      vip: 192.168.151.81
  vault-hacluster:
    charm: hacluster
    channel: stable
    revision: 83
  vault-mysql-router:
    charm: mysql-router
    channel: stable
    revision: 15
machines:
  "0":
    constraints: arch=amd64
  "1":
    constraints: arch=amd64
  "2":
    constraints: arch=amd64
relations:
- - vault-mysql-router:db-router
  - mysql-innodb-cluster:db-router
- - vault:shared-db
  - vault-mysql-router:shared-db
- - vault:etcd
  - etcd:db
- - etcd:certificates
  - easyrsa:client
- - vault-hacluster:ha
  - vault:ha
