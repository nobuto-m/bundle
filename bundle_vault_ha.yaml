series: focal
applications:
  easyrsa:
    charm: cs:~containers/easyrsa
    num_units: 1
    to:
    - lxd:0
  etcd:
    charm: etcd
    num_units: 3
    to:
    - lxd:0
    - lxd:1
    - lxd:2
  mysql-innodb-cluster:
    charm: mysql-innodb-cluster
    num_units: 3
    to:
    - lxd:0
    - lxd:1
    - lxd:2
  vault:
    charm: vault
    num_units: 3
    to:
    - lxd:0
    - lxd:1
    - lxd:2
    options:
      vip: 192.168.151.81
  vault-hacluster:
    charm: hacluster
  vault-mysql-router:
    charm: mysql-router
machines:
  "0":
    constraints: arch=amd64
  "1":
    constraints: arch=amd64
  "2":
    constraints: arch=amd64
relations:
- - vault-mysql-router:db-router
  - mysql-innodb-cluster:db-router
- - vault:shared-db
  - vault-mysql-router:shared-db
- - vault:etcd
  - etcd:db
- - etcd:certificates
  - easyrsa:client
- - vault-hacluster:ha
  - vault:ha
